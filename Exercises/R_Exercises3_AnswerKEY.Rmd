---
title: "R Exercises Session 3"
author: "Introduction to R for Data Management and Analysis"
date: "June 9, 2016"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Note**: Use `Ctrl (Command) + Alt (Option) + I` or go to `Code` >
`Insert Chunk` (from the menu) to insert a code block "chunk". 

## Exercises

1. Load the `iris` dataset. Take only the observations that have a `Petal.Width`
greater than `2.0`.
Show your code. 

```{r}
iris[ iris$Petal.Width > 2.0 ,]
```

2. Save the previous operation to an R object and use it to count the number of
each `Species` with the `table` function.

```{r}
subIris <- iris[ iris$Petal.Width > 2.0 ,]
table(subIris$Species)
```

3. Load the `mtcars` dataset. `arrange` or `order` the dataset by decreasing
order in `mpg`.

```{r}
## reorder the mtcars dataset based on mpg
mtcars[order(mtcars$mpg, decreasing = TRUE),]

## with dplyr..
library(dplyr)
arrange(mtcars, -mpg)
```

4. Apply `aggregate` or `summarize_each` to the mtcars dataset with a mean for
each of the categories in the `cyl` or cylinder column. What cylinder category
gets the most miles per gallon? What cylinder category has the highest mean
weight (`wt`)? Show your code.

```{r}
## Using formula notation to indicate all variables
mtcars2 <- aggregate(. ~ cyl, data = mtcars, FUN = mean)

## optional subsetting based on max weight
mtcars2[which(mtcars2$wt == max(mtcars2$wt)),]
```

Cars with 4 cylinders have the highest mean miles per gallon. 
Cars with 8 cylinders have the highest mean weight (shown in thousands of
pounds).

5. Consider a systematic error for the weight scale used in the `ChickWeight`
dataset. The reading on each of the weights was consistently 5 grams lower than
the actual weight. Create a new column in the `ChickWeight` dataset to adjust
for the measurement error. Show your work.

```{r}
## See the names in the dataset
names(ChickWeight)

## Add 5 to each of the weight measurements
ChickWeight$newWeight <- ChickWeight[, "weight"] + 5

## Verify results
head(ChickWeight)
```

6. Read in the `babies.txt` dataset in the Example data folder using the
`read.table` function with headers enabled. For those observations that are `9`
in the `smoke` variable, replace them with `NA`. To do that, first use the `==`
operator to find observations equal to `9` in the smoke variable and then subset
the smoke vector restricted to those observations and at the same time assign
`NA` values to it. Show your work. If your assignment fails, re-import the data
to get a clean dataset.

```{r}
## read in data with appropriate arguments
babies <- read.table("./Data/babies.txt", header = TRUE)

## replace only the values = 9 in the vector
babies$smoke[babies$smoke == 9] <- NA

## Verify results using table
table(babies$smoke, useNA = "always")
```

